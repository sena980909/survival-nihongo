import { StageDialogue } from "../dialogue";

export const stage2Dialogue: StageDialogue = {
  stageId: 2,
  initialStepId: "step1",
  requiredMilestones: ["heating", "bag", "payment"],
  successMessage: "편의점 쇼핑을 무사히 마쳤습니다! 일본 편의점 문화를 체험했어요.",
  successNpcLine: "ありがとうございました！またお越しくださいませ。",
  successNpcLineKo: "감사합니다! 또 오세요.",
  successNpcLinePronunciation: "아리가또 고자이마시타! 마타 오코시 쿠다사이마세.",
  steps: [
    // ── Step 1: 入店 いらっしゃいませ ──────────────────────
    {
      id: "step1",
      npcLine: "いらっしゃいませ！",
      npcLineKo: "어서 오세요!",
      npcLinePronunciation: "이랏샤이마세!",
      npcEmotion: "happy",
      education: {
        keyExpression: {
          pattern: "いらっしゃいませ",
          patternKo: "어서 오세요",
          explanation: "일본 상점에서 손님이 들어오면 하는 인사입니다. 대답하지 않아도 괜찮지만, 가볍게 인사하면 좋아요.",
          formality: "formal",
        },
        vocabulary: [
          {
            word: "いらっしゃいませ",
            reading: "いらっしゃいませ",
            pronunciation: "이랏샤이마세",
            meaning: "어서 오세요 (상점 인사)",
          },
          {
            word: "コンビニ",
            reading: "コンビニ",
            pronunciation: "콤비니",
            meaning: "편의점",
          },
          {
            word: "店員",
            reading: "てんいん",
            pronunciation: "텐인",
            meaning: "점원",
          },
        ],
        kanjiChallenge: {
          kanji: "店",
          correctReading: "みせ",
          wrongReadings: ["てん", "たな", "しょう"],
          meaning: "가게",
          hint: "훈독으로 읽으면 '가게'라는 뜻이에요.",
        },
      },
      choices: [
        {
          id: "step1_ok",
          text: "あ、どうも。",
          textKo: "아, 안녕하세요.",
          pronunciation: "아, 도-모.",
          quality: "ok",
          damage: 5,
          feedback: "가볍게 인사를 했어요. 일본에서는 편의점에서 대답 안 해도 되지만, 인사하면 좋은 인상이에요.",
          npcEmotion: "neutral",
          nextStepId: "step2",
        },
        {
          id: "step1_bad",
          text: "いらっしゃいませ！",
          textKo: "어서 오세요!",
          pronunciation: "이랏샤이마세!",
          quality: "bad",
          damage: 15,
          feedback: "'いらっしゃいませ'는 점원이 손님에게 하는 말이에요! 손님이 따라하면 어색해요.",
          npcEmotion: "confused",
          nextStepId: "step2",
        },
        {
          id: "step1_best",
          text: "こんにちは。",
          textKo: "안녕하세요.",
          pronunciation: "콘니치와.",
          quality: "best",
          damage: 0,
          feedback: "자연스러운 인사예요! 'こんにちは'로 가볍게 응답하는 게 좋습니다.",
          npcEmotion: "happy",
          nextStepId: "step2",
        },
      ],
    },

    // ── Step 2: お弁当温め ────────────────────────────────
    {
      id: "step2",
      npcLine: "お弁当温めますか？",
      npcLineKo: "도시락 데워드릴까요?",
      npcLinePronunciation: "오벤또- 아타타메마스카?",
      npcEmotion: "neutral",
      isMilestone: true,
      milestoneTag: "heating",
      education: {
        keyExpression: {
          pattern: "〜ますか？",
          patternKo: "〜할까요? / 〜하시겠어요?",
          explanation: "정중하게 의향을 묻는 표현입니다. 편의점에서 도시락을 사면 꼭 나오는 질문이에요.",
          formality: "polite",
        },
        vocabulary: [
          {
            word: "お弁当",
            reading: "おべんとう",
            pronunciation: "오벤또-",
            meaning: "도시락",
          },
          {
            word: "温める",
            reading: "あたためる",
            pronunciation: "아타타메루",
            meaning: "데우다",
          },
          {
            word: "電子レンジ",
            reading: "でんしレンジ",
            pronunciation: "덴시 렌지",
            meaning: "전자레인지",
          },
        ],
        kanjiChallenge: {
          kanji: "温",
          correctReading: "あたた",
          wrongReadings: ["おん", "ぬく", "あつ"],
          meaning: "따뜻하다, 데우다",
          hint: "'温める(아타타메루)'에서 '温'의 훈독이에요.",
        },
      },
      choices: [
        {
          id: "step2_best",
          text: "はい、お願いします。",
          textKo: "네, 부탁합니다.",
          pronunciation: "하이, 오네가이시마스.",
          quality: "best",
          damage: 0,
          feedback: "완벽해요! 'お願いします'는 부탁할 때 쓰는 만능 표현이에요.",
          npcEmotion: "happy",
          nextStepId: "step3",
        },
        {
          id: "step2_bad",
          text: "あたためる？何ですか？",
          textKo: "데우다? 그게 뭐예요?",
          pronunciation: "아타타메루? 난데스카?",
          quality: "bad",
          damage: 15,
          feedback: "'温める'는 '데우다'예요. 편의점에서 도시락을 사면 데워줄지 항상 물어봐요!",
          npcEmotion: "confused",
          nextStepId: "step2_recovery",
        },
        {
          id: "step2_ok",
          text: "あ、はい。",
          textKo: "아, 네.",
          pronunciation: "아, 하이.",
          quality: "ok",
          damage: 5,
          feedback: "대답은 했지만, 'お願いします(오네가이시마스)'를 붙이면 더 정중해요.",
          npcEmotion: "neutral",
          nextStepId: "step3",
        },
      ],
    },

    // ── Step 2 Recovery ──────────────────────────────────
    {
      id: "step2_recovery",
      npcLine: "お弁当、チンしますか？温めますか？",
      npcLineKo: "도시락, 데울까요? 데워드릴까요?",
      npcLinePronunciation: "오벤또-, 칭시마스카? 아타타메마스카?",
      npcEmotion: "neutral",
      isMilestone: true,
      milestoneTag: "heating",
      education: {
        keyExpression: {
          pattern: "チンする",
          patternKo: "전자레인지에 돌리다",
          explanation: "'チン'은 전자레인지 소리에서 온 의태어예요. 구어체에서 '데우다'라는 뜻으로 많이 씁니다.",
          formality: "casual",
        },
        vocabulary: [
          {
            word: "チンする",
            reading: "チンする",
            pronunciation: "칭스루",
            meaning: "전자레인지에 돌리다",
          },
          {
            word: "大丈夫",
            reading: "だいじょうぶ",
            pronunciation: "다이죠-부",
            meaning: "괜찮다",
          },
        ],
        kanjiChallenge: {
          kanji: "弁当",
          correctReading: "べんとう",
          wrongReadings: ["べんたい", "べんどう", "びんとう"],
          meaning: "도시락",
          hint: "일본의 대표적인 포장 음식, 도시락이에요.",
        },
      },
      choices: [
        {
          id: "step2r_best",
          text: "あ、はい、お願いします！",
          textKo: "아, 네, 부탁합니다!",
          pronunciation: "아, 하이, 오네가이시마스!",
          quality: "best",
          damage: 0,
          feedback: "이번에는 잘 알아듣고 대답했어요! 'お願いします'도 잘 붙였습니다.",
          npcEmotion: "happy",
          nextStepId: "step3",
        },
        {
          id: "step2r_ok",
          text: "はい。",
          textKo: "네.",
          pronunciation: "하이.",
          quality: "ok",
          damage: 5,
          feedback: "짧게 대답했어요. 의미는 통했지만 'お願いします'를 붙이는 습관을 들이세요!",
          npcEmotion: "neutral",
          nextStepId: "step3",
        },
        {
          id: "step2r_bad",
          text: "大丈夫です。",
          textKo: "괜찮아요.",
          pronunciation: "다이죠-부데스.",
          quality: "bad",
          damage: 15,
          feedback: "'大丈夫です'라고 하면 '안 데워도 괜찮다'는 뜻이 돼요. 데우고 싶으면 'はい'라고 하세요!",
          npcEmotion: "neutral",
          nextStepId: "step3",
        },
      ],
    },

    // ── Step 3: レジ袋 ────────────────────────────────────
    {
      id: "step3",
      npcLine: "袋はご利用ですか？有料になりますが。",
      npcLineKo: "봉투는 사용하시겠어요? 유료인데요.",
      npcLinePronunciation: "후쿠로와 고리요-데스카? 유-료-니 나리마스가.",
      npcEmotion: "neutral",
      isMilestone: true,
      milestoneTag: "bag",
      education: {
        keyExpression: {
          pattern: "〜はご利用ですか",
          patternKo: "〜은/는 이용하시겠어요",
          explanation: "'ご利用'은 '이용'의 높임 표현입니다. 2020년부터 일본 편의점 비닐봉투가 유료화됐어요.",
          formality: "polite",
        },
        vocabulary: [
          {
            word: "袋",
            reading: "ふくろ",
            pronunciation: "후쿠로",
            meaning: "봉투, 가방",
          },
          {
            word: "有料",
            reading: "ゆうりょう",
            pronunciation: "유-료-",
            meaning: "유료",
          },
          {
            word: "利用",
            reading: "りよう",
            pronunciation: "리요-",
            meaning: "이용",
          },
        ],
        kanjiChallenge: {
          kanji: "袋",
          correctReading: "ふくろ",
          wrongReadings: ["たい", "ぶくろ", "ふく"],
          meaning: "봉투",
          hint: "편의점에서 물건을 담는 것, '봉투'예요.",
        },
      },
      choices: [
        {
          id: "step3_ok",
          text: "あ、はい。お願いします。",
          textKo: "아, 네. 부탁합니다.",
          pronunciation: "아, 하이. 오네가이시마스.",
          quality: "ok",
          damage: 5,
          feedback: "봉투를 요청했어요. 유료라는 걸 인지하고 자연스럽게 대답했습니다.",
          npcEmotion: "neutral",
          nextStepId: "step4",
        },
        {
          id: "step3_best",
          text: "大丈夫です。袋はいりません。",
          textKo: "괜찮아요. 봉투는 필요 없어요.",
          pronunciation: "다이죠-부데스. 후쿠로와 이리마셍.",
          quality: "best",
          damage: 0,
          feedback: "에코백이나 가방이 있으면 이렇게 거절하는 게 자연스러워요! 환경에도 좋고요.",
          npcEmotion: "happy",
          nextStepId: "step4",
        },
        {
          id: "step3_bad",
          text: "有料？何円ですか？高くないですか？",
          textKo: "유료? 얼마예요? 비싸지 않아요?",
          pronunciation: "유-료-? 난엔데스카? 타카쿠나이데스카?",
          quality: "bad",
          damage: 15,
          feedback: "봉투는 3~5엔 정도예요. 가격을 따지면 줄이 밀려서 뒤에 있는 사람들이 짜증날 수 있어요!",
          npcEmotion: "confused",
          nextStepId: "step3_recovery",
        },
      ],
    },

    // ── Step 3 Recovery ──────────────────────────────────
    {
      id: "step3_recovery",
      npcLine: "3円です。袋、いりますか？いりませんか？",
      npcLineKo: "3엔이에요. 봉투, 필요해요? 필요 없어요?",
      npcLinePronunciation: "산엔데스. 후쿠로, 이리마스카? 이리마셍카?",
      npcEmotion: "neutral",
      isMilestone: true,
      milestoneTag: "bag",
      education: {
        keyExpression: {
          pattern: "いりますか？いりませんか？",
          patternKo: "필요해요? 필요 없어요?",
          explanation: "'いる(이루)'는 '필요하다'라는 뜻이에요. 'いりません'은 정중한 거절 표현입니다.",
          formality: "polite",
        },
        vocabulary: [
          {
            word: "いる",
            reading: "いる",
            pronunciation: "이루",
            meaning: "필요하다",
          },
          {
            word: "円",
            reading: "えん",
            pronunciation: "엔",
            meaning: "엔 (일본 화폐 단위)",
          },
        ],
        kanjiChallenge: {
          kanji: "円",
          correctReading: "えん",
          wrongReadings: ["まる", "えい", "わん"],
          meaning: "엔 (화폐)",
          hint: "일본 돈의 단위예요.",
        },
      },
      choices: [
        {
          id: "step3r_best",
          text: "いりません。大丈夫です。",
          textKo: "필요 없어요. 괜찮아요.",
          pronunciation: "이리마셍. 다이죠-부데스.",
          quality: "best",
          damage: 0,
          feedback: "깔끔하게 거절했어요! 'いりません'은 편의점에서 자주 쓰는 표현이에요.",
          npcEmotion: "neutral",
          nextStepId: "step4",
        },
        {
          id: "step3r_bad",
          text: "うーん…どうしよう…",
          textKo: "음… 어떡하지…",
          pronunciation: "우-응… 도-시요-…",
          quality: "bad",
          damage: 15,
          feedback: "편의점은 빠른 결정이 필요해요! 뒤에 줄이 있으니 'はい' 또는 'いりません'으로 빨리 답하세요.",
          npcEmotion: "confused",
          nextStepId: "step4",
        },
        {
          id: "step3r_ok",
          text: "じゃ、お願いします。",
          textKo: "그럼, 부탁합니다.",
          pronunciation: "쟈, 오네가이시마스.",
          quality: "ok",
          damage: 5,
          feedback: "봉투를 받기로 했어요. 'じゃ'를 붙여서 자연스러운 대화 흐름을 만들었습니다.",
          npcEmotion: "neutral",
          nextStepId: "step4",
        },
      ],
    },

    // ── Step 4: お箸・スプーン ────────────────────────────
    {
      id: "step4",
      npcLine: "お箸はおつけしますか？スプーンもいりますか？",
      npcLineKo: "젓가락 넣어드릴까요? 스푼도 필요하세요?",
      npcLinePronunciation: "오하시와 오츠케시마스카? 스푸-응모 이리마스카?",
      npcEmotion: "neutral",
      education: {
        keyExpression: {
          pattern: "〜はおつけしますか",
          patternKo: "〜은/는 넣어드릴까요",
          explanation: "'おつけする'는 '付ける(츠케루, 붙이다/넣다)'의 겸양어입니다. 점원이 손님에게 쓰는 표현이에요.",
          formality: "formal",
        },
        vocabulary: [
          {
            word: "お箸",
            reading: "おはし",
            pronunciation: "오하시",
            meaning: "젓가락",
          },
          {
            word: "スプーン",
            reading: "スプーン",
            pronunciation: "스푸-응",
            meaning: "스푼, 숟가락",
          },
          {
            word: "つける",
            reading: "つける",
            pronunciation: "츠케루",
            meaning: "붙이다, 넣다",
          },
        ],
        kanjiChallenge: {
          kanji: "箸",
          correctReading: "はし",
          wrongReadings: ["ばし", "しょ", "はこ"],
          meaning: "젓가락",
          hint: "음식을 집어 먹는 도구, '젓가락'이에요.",
        },
      },
      choices: [
        {
          id: "step4_bad",
          text: "え、全部ください。",
          textKo: "에, 전부 주세요.",
          pronunciation: "에, 젠부 쿠다사이.",
          quality: "bad",
          damage: 10,
          feedback: "필요한 것만 요청하는 게 좋아요. 무작정 전부 달라고 하면 낭비예요!",
          npcEmotion: "confused",
          nextStepId: "step5",
        },
        {
          id: "step4_best",
          text: "お箸だけお願いします。",
          textKo: "젓가락만 부탁합니다.",
          pronunciation: "오하시다케 오네가이시마스.",
          quality: "best",
          damage: 0,
          feedback: "'だけ(다케, ~만)'를 사용해서 필요한 것만 정확히 요청했어요! 완벽합니다.",
          npcEmotion: "happy",
          nextStepId: "step5",
        },
        {
          id: "step4_ok",
          text: "はい、お願いします。",
          textKo: "네, 부탁합니다.",
          pronunciation: "하이, 오네가이시마스.",
          quality: "ok",
          damage: 5,
          feedback: "둘 다 받기로 했어요. 필요한 것만 고르면 더 자연스럽지만, 대답 자체는 좋아요.",
          npcEmotion: "neutral",
          nextStepId: "step5",
        },
      ],
    },

    // ── Step 5: ポイントカード ────────────────────────────
    {
      id: "step5",
      npcLine: "ポイントカードはお持ちですか？",
      npcLineKo: "포인트 카드는 가지고 계세요?",
      npcLinePronunciation: "포인토 카-도와 오모치데스카?",
      npcEmotion: "neutral",
      education: {
        keyExpression: {
          pattern: "〜はお持ちですか",
          patternKo: "〜은/는 가지고 계세요",
          explanation: "'お持ちですか'는 '持っていますか'의 높임 표현입니다. 편의점에서 포인트 카드를 물어볼 때 씁니다.",
          formality: "formal",
        },
        vocabulary: [
          {
            word: "ポイントカード",
            reading: "ポイントカード",
            pronunciation: "포인토 카-도",
            meaning: "포인트 카드",
          },
          {
            word: "持つ",
            reading: "もつ",
            pronunciation: "모츠",
            meaning: "가지다",
          },
          {
            word: "大丈夫",
            reading: "だいじょうぶ",
            pronunciation: "다이죠-부",
            meaning: "괜찮다, 됐다",
          },
        ],
        kanjiChallenge: {
          kanji: "持",
          correctReading: "も",
          wrongReadings: ["じ", "た", "ち"],
          meaning: "가지다",
          hint: "'持つ(모츠)'에서 '持'의 훈독이에요.",
        },
      },
      choices: [
        {
          id: "step5_best",
          text: "大丈夫です。持っていません。",
          textKo: "괜찮아요. 가지고 있지 않아요.",
          pronunciation: "다이죠-부데스. 못테이마셍.",
          quality: "best",
          damage: 0,
          feedback: "명확하게 없다고 전달했어요! '大丈夫です'로 정중하게 거절하는 건 일본에서 자주 쓰는 패턴이에요.",
          npcEmotion: "neutral",
          nextStepId: "step6",
        },
        {
          id: "step5_ok",
          text: "ないです。",
          textKo: "없어요.",
          pronunciation: "나이데스.",
          quality: "ok",
          damage: 5,
          feedback: "짧게 대답했어요. 의미는 통하지만 '大丈夫です'가 더 자연스러워요.",
          npcEmotion: "neutral",
          nextStepId: "step6",
        },
        {
          id: "step5_bad",
          text: "ポイントカード？何それ？",
          textKo: "포인트 카드? 그게 뭐야?",
          pronunciation: "포인토 카-도? 나니 소레?",
          quality: "bad",
          damage: 15,
          feedback: "반말('何それ')은 점원에게 실례예요! 없으면 '大丈夫です'라고 정중하게 말하세요.",
          npcEmotion: "confused",
          nextStepId: "step6",
        },
      ],
    },

    // ── Step 6: お会計 ────────────────────────────────────
    {
      id: "step6",
      npcLine: "お会計、330円になります。お支払いはいかがなさいますか？",
      npcLineKo: "계산은 330엔입니다. 결제는 어떻게 하시겠어요?",
      npcLinePronunciation: "오카이케-, 삼뱌쿠 산쥬- 엔니 나리마스. 오시하라이와 이카가 나사이마스카?",
      npcEmotion: "neutral",
      isMilestone: true,
      milestoneTag: "payment",
      education: {
        keyExpression: {
          pattern: "〜円になります",
          patternKo: "〜엔이 됩니다",
          explanation: "'〜になります'는 가격을 알려주는 정중한 표현이에요. 일본 상점에서 항상 들을 수 있어요.",
          formality: "polite",
        },
        vocabulary: [
          {
            word: "お会計",
            reading: "おかいけい",
            pronunciation: "오카이케-",
            meaning: "계산",
          },
          {
            word: "支払い",
            reading: "しはらい",
            pronunciation: "시하라이",
            meaning: "지불, 결제",
          },
          {
            word: "現金",
            reading: "げんきん",
            pronunciation: "겐킹",
            meaning: "현금",
          },
        ],
        kanjiChallenge: {
          kanji: "会計",
          correctReading: "かいけい",
          wrongReadings: ["かいさん", "あいけい", "えけい"],
          meaning: "계산, 회계",
          hint: "물건을 사고 돈을 내는 행위, '계산'이에요.",
        },
      },
      choices: [
        {
          id: "step6_ok",
          text: "カードで。",
          textKo: "카드로요.",
          pronunciation: "카-도데.",
          quality: "ok",
          damage: 5,
          feedback: "카드 결제를 요청했어요. 짧지만 의미는 통합니다. 'お願いします'를 붙이면 더 좋아요.",
          npcEmotion: "neutral",
          nextStepId: "step7",
        },
        {
          id: "step6_best",
          text: "現金でお願いします。",
          textKo: "현금으로 부탁합니다.",
          pronunciation: "겐킹데 오네가이시마스.",
          quality: "best",
          damage: 0,
          feedback: "결제 방법을 명확하게 전달하고 'お願いします'까지! 완벽한 대답이에요.",
          npcEmotion: "happy",
          nextStepId: "step7",
        },
        {
          id: "step6_bad",
          text: "え、高い！まけてください。",
          textKo: "에, 비싸요! 깎아주세요.",
          pronunciation: "에, 타카이! 마케테 쿠다사이.",
          quality: "bad",
          damage: 20,
          feedback: "편의점에서는 절대 가격 흥정을 하지 않아요! 정가를 내야 합니다.",
          npcEmotion: "confused",
          nextStepId: "step6_recovery",
        },
      ],
    },

    // ── Step 6 Recovery ──────────────────────────────────
    {
      id: "step6_recovery",
      npcLine: "330円です。現金ですか？カードですか？",
      npcLineKo: "330엔이에요. 현금이에요? 카드예요?",
      npcLinePronunciation: "삼뱌쿠 산쥬- 엔데스. 겐킹데스카? 카-도데스카?",
      npcEmotion: "confused",
      isMilestone: true,
      milestoneTag: "payment",
      education: {
        keyExpression: {
          pattern: "〜ですか？〜ですか？",
          patternKo: "〜인가요? 〜인가요?",
          explanation: "선택지를 주면서 묻는 표현입니다. 둘 중 하나를 골라서 대답하면 돼요.",
          formality: "polite",
        },
        vocabulary: [
          {
            word: "現金",
            reading: "げんきん",
            pronunciation: "겐킹",
            meaning: "현금",
          },
          {
            word: "カード",
            reading: "カード",
            pronunciation: "카-도",
            meaning: "카드",
          },
        ],
        kanjiChallenge: {
          kanji: "金",
          correctReading: "きん",
          wrongReadings: ["かね", "こん", "がね"],
          meaning: "돈, 금",
          hint: "'現金(겐킹)'에서 '金'의 음독이에요.",
        },
      },
      choices: [
        {
          id: "step6r_ok",
          text: "カードで。",
          textKo: "카드로요.",
          pronunciation: "카-도데.",
          quality: "ok",
          damage: 5,
          feedback: "카드 결제를 선택했어요. 다음엔 'お願いします'도 붙여보세요!",
          npcEmotion: "neutral",
          nextStepId: "step7",
        },
        {
          id: "step6r_best",
          text: "すみません、現金でお願いします。",
          textKo: "죄송합니다, 현금으로 부탁합니다.",
          pronunciation: "스미마셍, 겐킹데 오네가이시마스.",
          quality: "best",
          damage: 0,
          feedback: "사과와 함께 결제 방법을 명확하게 전달했어요! 훌륭합니다.",
          npcEmotion: "neutral",
          nextStepId: "step7",
        },
        {
          id: "step6r_bad",
          text: "どっちでもいい。",
          textKo: "아무거나 상관없어.",
          pronunciation: "돗치데모 이-.",
          quality: "bad",
          damage: 15,
          feedback: "결제 방법은 직접 골라야 해요! 반말도 점원에게 실례예요.",
          npcEmotion: "angry",
          nextStepId: "step7",
        },
      ],
    },

    // ── Step 7: おつり ────────────────────────────────────
    {
      id: "step7",
      npcLine: "500円お預かりします。170円のお返しです。",
      npcLineKo: "500엔 받겠습니다. 170엔 거스름돈입니다.",
      npcLinePronunciation: "고햐쿠엔 오아즈카리시마스. 햐쿠 나나쥬- 엔노 오카에시데스.",
      npcEmotion: "neutral",
      education: {
        keyExpression: {
          pattern: "〜お預かりします / 〜のお返しです",
          patternKo: "〜 받겠습니다 / 〜 거스름돈입니다",
          explanation: "'お預かりします'는 돈을 받겠다는 정중한 표현, 'お返し'는 거스름돈이에요.",
          formality: "formal",
        },
        vocabulary: [
          {
            word: "お預かり",
            reading: "おあずかり",
            pronunciation: "오아즈카리",
            meaning: "맡다, 받다 (겸양어)",
          },
          {
            word: "お返し",
            reading: "おかえし",
            pronunciation: "오카에시",
            meaning: "거스름돈, 반환",
          },
          {
            word: "レシート",
            reading: "レシート",
            pronunciation: "레시-토",
            meaning: "영수증",
          },
        ],
        kanjiChallenge: {
          kanji: "返",
          correctReading: "かえ",
          wrongReadings: ["へん", "もど", "はん"],
          meaning: "돌려주다",
          hint: "'お返し(오카에시)'에서 '返'의 훈독이에요.",
        },
      },
      choices: [
        {
          id: "step7_best",
          text: "ありがとうございます。",
          textKo: "감사합니다.",
          pronunciation: "아리가또 고자이마스.",
          quality: "best",
          damage: 0,
          feedback: "거스름돈을 받으며 감사 인사를 했어요. 자연스럽고 예의바른 응대입니다!",
          npcEmotion: "happy",
          nextStepId: "step8",
        },
        {
          id: "step7_ok",
          text: "どうも。",
          textKo: "고마워요.",
          pronunciation: "도-모.",
          quality: "ok",
          damage: 5,
          feedback: "짧은 감사 인사예요. 편한 표현이지만 'ありがとうございます'가 더 좋아요.",
          npcEmotion: "neutral",
          nextStepId: "step8",
        },
        {
          id: "step7_bad",
          text: "合ってますか？ちょっと確認…",
          textKo: "맞아요? 좀 확인해볼게…",
          pronunciation: "앗테마스카? 쵸또 카쿠닝…",
          quality: "bad",
          damage: 10,
          feedback: "거스름돈을 의심하면 점원이 기분 나빠해요. 일본 편의점은 정확해요!",
          npcEmotion: "angry",
          nextStepId: "step8",
        },
      ],
    },

    // ── Step 8: レシート ──────────────────────────────────
    {
      id: "step8",
      npcLine: "レシートはいかがなさいますか？",
      npcLineKo: "영수증은 어떻게 하시겠어요?",
      npcLinePronunciation: "레시-토와 이카가 나사이마스카?",
      npcEmotion: "neutral",
      education: {
        keyExpression: {
          pattern: "いかがなさいますか",
          patternKo: "어떻게 하시겠습니까",
          explanation: "'いかがなさいますか'는 '어떻게 하시겠습니까'의 매우 정중한 표현이에요. 'どうしますか'보다 격식 있어요.",
          formality: "formal",
        },
        vocabulary: [
          {
            word: "レシート",
            reading: "レシート",
            pronunciation: "레시-토",
            meaning: "영수증",
          },
          {
            word: "いかが",
            reading: "いかが",
            pronunciation: "이카가",
            meaning: "어떻게 (정중)",
          },
        ],
        kanjiChallenge: {
          kanji: "受",
          correctReading: "う",
          wrongReadings: ["じゅ", "うけ", "しゅ"],
          meaning: "받다",
          hint: "'受け取る(우케토루, 받다)'에서 '受'의 훈독이에요.",
        },
      },
      choices: [
        {
          id: "step8_ok",
          text: "はい、ください。",
          textKo: "네, 주세요.",
          pronunciation: "하이, 쿠다사이.",
          quality: "ok",
          damage: 5,
          feedback: "영수증을 받기로 했어요. 면세 등에 필요할 수 있으니 받아두는 것도 좋아요.",
          npcEmotion: "neutral",
          nextStepId: "step9",
        },
        {
          id: "step8_best",
          text: "大丈夫です。いりません。",
          textKo: "괜찮아요. 필요 없어요.",
          pronunciation: "다이죠-부데스. 이리마셍.",
          quality: "best",
          damage: 0,
          feedback: "깔끔하게 거절했어요! 필요 없으면 이렇게 말하는 게 자연스러워요.",
          npcEmotion: "neutral",
          nextStepId: "step9",
        },
        {
          id: "step8_bad",
          text: "レシート？わかんない。",
          textKo: "영수증? 모르겠어.",
          pronunciation: "레시-토? 와칸나이.",
          quality: "bad",
          damage: 15,
          feedback: "'わかんない'는 매우 캐주얼한 반말이에요. 점원에게는 정중하게 말하세요!",
          npcEmotion: "confused",
          nextStepId: "step9",
        },
      ],
    },

    // ── Step 9: 商品の扱い ────────────────────────────────
    {
      id: "step9",
      npcLine: "こちら温まりましたので、お気をつけください。熱いですよ。",
      npcLineKo: "이쪽 다 데워졌으니, 조심하세요. 뜨거워요.",
      npcLinePronunciation: "코치라 아타타마리마시타노데, 오키오츠케 쿠다사이. 아츠이데스요.",
      npcEmotion: "neutral",
      education: {
        keyExpression: {
          pattern: "お気をつけください",
          patternKo: "조심하세요",
          explanation: "'気をつける(키오츠케루)'는 '조심하다'라는 뜻이에요. 'お'를 붙여서 정중하게 만들었어요.",
          formality: "polite",
        },
        vocabulary: [
          {
            word: "温まる",
            reading: "あたたまる",
            pronunciation: "아타타마루",
            meaning: "데워지다",
          },
          {
            word: "熱い",
            reading: "あつい",
            pronunciation: "아츠이",
            meaning: "뜨겁다",
          },
          {
            word: "気をつける",
            reading: "きをつける",
            pronunciation: "키오츠케루",
            meaning: "조심하다",
          },
        ],
        kanjiChallenge: {
          kanji: "熱",
          correctReading: "あつ",
          wrongReadings: ["ねつ", "あた", "ほと"],
          meaning: "뜨겁다",
          hint: "'熱い(아츠이)'의 '熱' 훈독이에요. 온도가 높은 것을 뜻해요.",
        },
      },
      choices: [
        {
          id: "step9_best",
          text: "わかりました。ありがとうございます。",
          textKo: "알겠습니다. 감사합니다.",
          pronunciation: "와카리마시타. 아리가또 고자이마스.",
          quality: "best",
          damage: 0,
          feedback: "주의사항을 잘 듣고 감사 인사까지! 훌륭한 응대예요.",
          npcEmotion: "happy",
          nextStepId: "step10",
        },
        {
          id: "step9_bad",
          text: "大丈夫、大丈夫。",
          textKo: "괜찮아, 괜찮아.",
          pronunciation: "다이죠-부, 다이죠-부.",
          quality: "bad",
          damage: 10,
          feedback: "점원의 친절한 안내를 무시하는 것 같아요. 'ありがとう'라고 한마디 하면 좋겠어요.",
          npcEmotion: "neutral",
          nextStepId: "step10",
        },
        {
          id: "step9_ok",
          text: "はい、気をつけます。",
          textKo: "네, 조심할게요.",
          pronunciation: "하이, 키오츠케마스.",
          quality: "ok",
          damage: 5,
          feedback: "점원의 말을 잘 듣고 조심하겠다고 했어요. 좋은 응대입니다!",
          npcEmotion: "neutral",
          nextStepId: "step10",
        },
      ],
    },

    // ── Step 10: お見送り ──────────────────────────────────
    {
      id: "step10",
      npcLine: "ありがとうございました！またお越しくださいませ！",
      npcLineKo: "감사합니다! 또 오세요!",
      npcLinePronunciation: "아리가또 고자이마시타! 마타 오코시 쿠다사이마세!",
      npcEmotion: "happy",
      education: {
        keyExpression: {
          pattern: "またお越しくださいませ",
          patternKo: "또 오세요 (매우 정중)",
          explanation: "'お越しください'는 '来てください(와 주세요)'의 매우 정중한 표현이에요. 상점에서 자주 들어요.",
          formality: "formal",
        },
        vocabulary: [
          {
            word: "また",
            reading: "また",
            pronunciation: "마타",
            meaning: "또, 다시",
          },
          {
            word: "お越し",
            reading: "おこし",
            pronunciation: "오코시",
            meaning: "오시다 (높임말)",
          },
          {
            word: "ありがとうございました",
            reading: "ありがとうございました",
            pronunciation: "아리가또 고자이마시타",
            meaning: "감사했습니다 (과거형)",
          },
        ],
        kanjiChallenge: {
          kanji: "越",
          correctReading: "こ",
          wrongReadings: ["えつ", "おつ", "ごし"],
          meaning: "넘다, 오다",
          hint: "'お越し(오코시)'에서 '越'의 훈독이에요.",
        },
      },
      choices: [
        {
          id: "step10_bad",
          text: "うん。",
          textKo: "응.",
          pronunciation: "웅.",
          quality: "bad",
          damage: 10,
          feedback: "'うん'은 반말 대답이에요. 상점을 나올 때는 감사 인사를 하는 게 매너예요.",
          npcEmotion: "neutral",
          nextStepId: "END",
        },
        {
          id: "step10_best",
          text: "ありがとうございました。ごちそうさまです。",
          textKo: "감사합니다. 잘 먹겠습니다.",
          pronunciation: "아리가또 고자이마시타. 고치소-사마데스.",
          quality: "best",
          damage: 0,
          feedback: "감사 인사에 'ごちそうさま(잘 먹겠습니다)'까지! 음식을 산 후 이 표현을 쓰면 매우 자연스러워요.",
          npcEmotion: "happy",
          nextStepId: "END",
        },
        {
          id: "step10_ok",
          text: "ありがとう。",
          textKo: "고마워요.",
          pronunciation: "아리가또.",
          quality: "ok",
          damage: 5,
          feedback: "감사 인사를 했지만, 'ございます'를 붙여서 'ありがとうございます'라고 하면 더 정중해요.",
          npcEmotion: "neutral",
          nextStepId: "END",
        },
      ],
    },
  ],
};
